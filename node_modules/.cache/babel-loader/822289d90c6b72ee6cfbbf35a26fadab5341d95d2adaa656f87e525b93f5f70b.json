{"ast":null,"code":"// CustomBlock.js\nimport grapesjs from 'grapesjs';\nfunction CustomBlockComponent(editor) {\n  editor.Blocks.add('custom-block', {\n    label: 'Custom Block',\n    content: '<div class=\"custom-block\">0</div>',\n    // Set initial content to '0'\n    category: 'Basic',\n    draggable: '.custom-block',\n    attributes: {\n      class: 'custom-block'\n    },\n    // Add a class for CSS customization\n\n    // Define traits for customization with initial values\n    traits: [{\n      type: 'number',\n      name: 'start',\n      label: 'Start Number',\n      value: 0\n    },\n    // Set initial value to 0\n    {\n      type: 'number',\n      name: 'end',\n      label: 'End Number',\n      value: 4\n    },\n    // Set initial value to 100\n    {\n      type: 'number',\n      name: 'speed',\n      label: 'Counting Speed',\n      value: 1000\n    },\n    // Set initial value to 1000 (milliseconds)\n    {\n      type: 'checkbox',\n      name: 'direction',\n      label: 'Count Up',\n      valueTrue: true,\n      valueFalse: false\n    },\n    // Set initial value to true (Count Up)\n    {\n      type: 'text',\n      name: 'prefix',\n      label: 'Prefix'\n    }, {\n      type: 'text',\n      name: 'suffix',\n      label: 'Suffix'\n    }, {\n      type: 'text',\n      name: 'separator',\n      label: 'Separator'\n    }]\n  });\n\n  // Run the counter logic after the block is added or modified\n  editor.on('block:drag:stop', block => {\n    if (true) {\n      const start = 0;\n      const end = 100;\n      const speed = 1000;\n      const direction = true;\n      console.log(direction);\n      const prefix = block.getTrait('prefix');\n      const suffix = block.getTrait('suffix');\n      const separator = block.getTrait('separator');\n      let currentNumber = start;\n      let increment = 1;\n      if (!direction) {\n        currentNumber = end;\n        increment = -1;\n      }\n\n      // Function to update the content\n      function updateContent() {\n        if (direction && currentNumber <= end || !direction && currentNumber >= start) {\n          // Update the block content and continue the counter if not reached the end or start\n          block.set({\n            content: prefix + currentNumber + suffix\n          });\n          // block.trigger('change:content');\n          currentNumber += increment;\n          console.log(increment, 'increment');\n          setTimeout(updateContent, speed);\n        }\n      }\n\n      // Initialize the counter by setting the content\n      block.set({\n        content: prefix + currentNumber + suffix\n      });\n      //   block.trigger('change:content');\n      console.log(currentNumber);\n      //   block.trigger('change:content');\n\n      // Start the counter\n      if (direction && currentNumber <= end || !direction && currentNumber >= start) {\n        updateContent();\n      }\n    }\n  });\n}\n_c = CustomBlockComponent;\nexport default CustomBlockComponent;\nvar _c;\n$RefreshReg$(_c, \"CustomBlockComponent\");","map":{"version":3,"names":["grapesjs","CustomBlockComponent","editor","Blocks","add","label","content","category","draggable","attributes","class","traits","type","name","value","valueTrue","valueFalse","on","block","start","end","speed","direction","console","log","prefix","getTrait","suffix","separator","currentNumber","increment","updateContent","set","setTimeout","_c","$RefreshReg$"],"sources":["/Users/user/grapesjs-editor/src/CustomBlock.js"],"sourcesContent":["// CustomBlock.js\nimport grapesjs from 'grapesjs';\n\nfunction CustomBlockComponent(editor) {\n  editor.Blocks.add('custom-block', {\n    label: 'Custom Block',\n    content: '<div class=\"custom-block\">0</div>', // Set initial content to '0'\n    category: 'Basic',\n    draggable: '.custom-block',\n    attributes: { class: 'custom-block' }, // Add a class for CSS customization\n\n    // Define traits for customization with initial values\n    traits: [\n      { type: 'number', name: 'start', label: 'Start Number', value: 0 }, // Set initial value to 0\n      { type: 'number', name: 'end', label: 'End Number', value: 4 }, // Set initial value to 100\n      { type: 'number', name: 'speed', label: 'Counting Speed', value: 1000 }, // Set initial value to 1000 (milliseconds)\n      { type: 'checkbox', name: 'direction', label: 'Count Up', valueTrue: true, valueFalse: false }, // Set initial value to true (Count Up)\n      { type: 'text', name: 'prefix', label: 'Prefix' },\n      { type: 'text', name: 'suffix', label: 'Suffix' },\n      { type: 'text', name: 'separator', label: 'Separator' },\n    ],\n  });\n\n  // Run the counter logic after the block is added or modified\n  editor.on('block:drag:stop', (block) => {\n    if (true) {\n      const start = 0;\n      const end = 100;\n      const speed = 1000;\n      const direction = true;\n      console.log(direction)\n      const prefix = block.getTrait('prefix');\n      const suffix = block.getTrait('suffix');\n      const separator = block.getTrait('separator');\n\n      let currentNumber = start;\n      let increment = 1;\n\n      if (!direction) {\n        currentNumber = end;\n        increment = -1;\n      }\n\n      // Function to update the content\n      function updateContent() {\n        if ((direction && currentNumber <= end) || (!direction && currentNumber >= start)) {\n          // Update the block content and continue the counter if not reached the end or start\n          block.set({ content: prefix + currentNumber + suffix });\n        // block.trigger('change:content');\n          currentNumber += increment;\n          console.log(increment,'increment')\n\n          setTimeout(updateContent, speed);\n        }\n      }\n\n      // Initialize the counter by setting the content\n      block.set({ content: prefix + currentNumber + suffix });\n    //   block.trigger('change:content');\n            console.log(currentNumber)\n    //   block.trigger('change:content');\n\n      // Start the counter\n      if ((direction && currentNumber <= end) || (!direction && currentNumber >= start)) {\n\n      updateContent();\n      }\n    }\n  });\n}\n\nexport default CustomBlockComponent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}