{"ast":null,"code":"// CustomBlock.js\nimport grapesjs from 'grapesjs';\nfunction CustomBlockComponent(editor) {\n  editor.Blocks.add('custom-block', {\n    label: 'Custom Block',\n    content: '<div class=\"custom-block\">0</div>',\n    // Set initial content to '0'\n    category: 'Basic',\n    draggable: '.custom-block',\n    attributes: {\n      class: 'custom-block'\n    },\n    // Add a class for CSS customization\n\n    // Define traits for customization with initial values\n    traits: [{\n      type: 'number',\n      name: 'start',\n      label: 'Start Number',\n      value: 0\n    },\n    // Set initial value to 0\n    {\n      type: 'number',\n      name: 'end',\n      label: 'End Number',\n      value: 100\n    },\n    // Set initial value to 100\n    {\n      type: 'number',\n      name: 'speed',\n      label: 'Counting Speed',\n      value: 1\n    },\n    // Set initial value to 1\n    {\n      type: 'checkbox',\n      name: 'direction',\n      label: 'Count Up',\n      valueTrue: true,\n      valueFalse: false\n    },\n    // Set initial value to true (Count Up)\n    {\n      type: 'text',\n      name: 'prefix',\n      label: 'Prefix'\n    }, {\n      type: 'text',\n      name: 'suffix',\n      label: 'Suffix'\n    }, {\n      type: 'text',\n      name: 'separator',\n      label: 'Separator'\n    }]\n  });\n\n  // Run the counter logic after the block is added or modified\n  editor.on('block:drag:stop', block => {\n    if (block.get('name') === 'custom-block') {\n      const start = block.get('start');\n      const end = block.get('end');\n      const speed = block.get('speed');\n      const direction = block.get('direction');\n      const prefix = block.get('prefix');\n      const suffix = block.get('suffix');\n      const separator = block.get('separator');\n      let currentNumber = start;\n      let increment = 1;\n      if (!direction) {\n        currentNumber = end;\n        increment = -1;\n      }\n      const intervalId = setInterval(() => {\n        if (direction && currentNumber >= end || !direction && currentNumber <= start) {\n          clearInterval(intervalId); // Stop the counter when it reaches the end or start\n        }\n\n        block.set('content', prefix + currentNumber + suffix); // Update the block content\n        currentNumber += increment;\n        block.trigger('change:content');\n      }, speed);\n    }\n  });\n}\n_c = CustomBlockComponent;\nexport default CustomBlockComponent;\nvar _c;\n$RefreshReg$(_c, \"CustomBlockComponent\");","map":{"version":3,"names":["grapesjs","CustomBlockComponent","editor","Blocks","add","label","content","category","draggable","attributes","class","traits","type","name","value","valueTrue","valueFalse","on","block","get","start","end","speed","direction","prefix","suffix","separator","currentNumber","increment","intervalId","setInterval","clearInterval","set","trigger","_c","$RefreshReg$"],"sources":["/Users/user/grapesjs-editor/src/CustomBlock.js"],"sourcesContent":["// CustomBlock.js\nimport grapesjs from 'grapesjs';\n\nfunction CustomBlockComponent(editor) {\n  editor.Blocks.add('custom-block', {\n    label: 'Custom Block',\n    content: '<div class=\"custom-block\">0</div>', // Set initial content to '0'\n    category: 'Basic',\n    draggable: '.custom-block',\n    attributes: { class: 'custom-block' }, // Add a class for CSS customization\n\n    // Define traits for customization with initial values\n    traits: [\n      { type: 'number', name: 'start', label: 'Start Number', value: 0 }, // Set initial value to 0\n      { type: 'number', name: 'end', label: 'End Number', value: 100 }, // Set initial value to 100\n      { type: 'number', name: 'speed', label: 'Counting Speed', value: 1 }, // Set initial value to 1\n      { type: 'checkbox', name: 'direction', label: 'Count Up', valueTrue: true, valueFalse: false }, // Set initial value to true (Count Up)\n      { type: 'text', name: 'prefix', label: 'Prefix' },\n      { type: 'text', name: 'suffix', label: 'Suffix' },\n      { type: 'text', name: 'separator', label: 'Separator' },\n    ],\n  });\n\n  // Run the counter logic after the block is added or modified\n  editor.on('block:drag:stop', (block) => {\n    if (block.get('name') === 'custom-block') {\n      const start = block.get('start');\n      const end = block.get('end');\n      const speed = block.get('speed');\n      const direction = block.get('direction');\n      const prefix = block.get('prefix');\n      const suffix = block.get('suffix');\n      const separator = block.get('separator');\n\n      let currentNumber = start;\n      let increment = 1;\n\n      if (!direction) {\n        currentNumber = end;\n        increment = -1;\n      }\n\n      const intervalId = setInterval(() => {\n        if ((direction && currentNumber >= end) || (!direction && currentNumber <= start)) {\n          clearInterval(intervalId); // Stop the counter when it reaches the end or start\n        }\n\n        block.set('content', prefix + currentNumber + suffix); // Update the block content\n        currentNumber += increment;\n        block.trigger('change:content');\n      }, speed);\n    }\n  });\n}\n\nexport default CustomBlockComponent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}